<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>国語 小テスト完全版 - フラッシュカード</title>

<style>
:root{
  --primary:#4a90e2;
  --secondary:#f39c12;
  --bg:#f5f7fa;
  --text:#333;
}
body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}
header{
  width:100%;
  padding:15px;
  background:white;
  text-align:center;
  box-shadow:0 2px 5px rgba(0,0,0,.1);
}
.controls{
  margin:15px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
select,button{
  padding:10px 15px;
  border-radius:8px;
  border:1px solid #ddd;
}
.counter{color:#777;margin-bottom:10px;text-align:center}

/* カード */
.card-container{
  width:90%;
  max-width:500px;
  height:250px;
  perspective:1000px;
  position:relative;
  margin-bottom:20px;
}
.card{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .6s;
  border-radius:15px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
}
.card.is-flipped{transform:rotateY(180deg)}
.card-face{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
  background:white;
  border-radius:15px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:20px;
  box-sizing:border-box;
  text-align:center;
}
.card-back{
  transform:rotateY(180deg);
  background:#eef5ff;
}
.question{font-size:1.2rem;font-weight:bold}
.answer{font-size:1.5rem;color:var(--primary);font-weight:bold}
.hint{font-size:.9rem;color:#666;margin-top:10px}

/* ブックマーク */
.btn-star{
  position:absolute;
  top:10px;
  right:15px;
  font-size:28px;
  background:none;
  border:none;
  color:#ccc;
  cursor:pointer;
  z-index:10;
}
.btn-star.active{color:var(--secondary)}

.nav-buttons{
  margin:20px;
  display:flex;
  gap:20px;
  justify-content:center;
}
.btn-nav{
  width:60px;
  height:60px;
  border-radius:50%;
  border:none;
  background:var(--primary);
  color:white;
  font-size:20px;
}
</style>
</head>

<body>

<header><h3>国語 小テスト完全版</h3></header>

<div class="controls">
<select id="modeSelect" onchange="initApp()">
  <option value="yoji">四字熟語</option>
  <option value="reading">漢字の読み</option>
  <option value="kanji">漢字の書き</option>
</select>
<button onclick="toggleOnlyBookmarked()">
  <span id="filterBtnText">ブックマークのみを表示</span>
</button>
</div>

<div class="counter" id="counter"></div>

<div class="card-container" id="cardContainer">
<button class="btn-star" id="starBtn" onclick="toggleBookmark(event)">★</button>
<div class="card" id="card">
  <div class="card-face">
    <div class="question" id="qText"></div>
    <div class="hint" id="qHint"></div>
  </div>
  <div class="card-face card-back">
    <div class="answer" id="aText"></div>
  </div>
</div>
</div>

<div class="nav-buttons">
<button class="btn-nav" onclick="prevCard(event)">←</button>
<button class="btn-nav" onclick="nextCard(event)">→</button>
</div>

<script>
const data = {
yoji:[
{q:"問題一□□千",a:"一騎当千"},
{q:"問題□怒哀□",a:"喜怒哀楽"},
{q:"問題□□実実",a:"虚虚実実"},
{q:"問題平穏□□",a:"平穏無事"},
{q:"問題□和□同",a:"付和雷同"},
{q:"問題一□打□",a:"一網打尽"},
{q:"問題小心□□",a:"小心翼翼"},
{q:"問題□□割拠",a:"群雄割拠"},
{q:"問題愛□□苦",a:"愛別離苦"},
{q:"問題□幻自□",a:"変幻自在"},
{q:"問題□己□礼",a:"克己復礼"},
{q:"問題巧□令□",a:"巧言令色"},
{q:"問題□慈□悲",a:"大慈大悲"},
{q:"問題不□長□",a:"不老長寿"},
{q:"問題□婚□祭",a:"冠婚葬祭"},
{q:"問題試□錯□",a:"試行錯誤"},
{q:"問題□殺□奪",a:"生殺与奪"},
{q:"問題温□篤□",a:"温厚篤実"},
{q:"問題□□選択",a:"取捨選択"},
{q:"問題大胆□□",a:"大胆不敵"},
{q:"問題鯨□馬□",a:"鯨飲馬食"},
{q:"問題□口牛□",a:"鶏口牛後"},
{q:"問題自□自□",a:"自暴自棄"},
{q:"問題勇□果□",a:"勇猛果敢"},
{q:"問題佳□薄□",a:"佳人薄命"},
{q:"問題複□怪□",a:"複雑怪奇"},
{q:"問題感□無□",a:"感慨無量"},
{q:"問題首□一□",a:"首尾一貫"},
{q:"問題離□集□",a:"離合集散"},
{q:"問題沈□黙□",a:"沈思黙考"},
{q:"問題美□麗□",a:"美辞麗句"},
{q:"問題遠□会□",a:"遠慮会釈"},
{q:"問題猪□猛□",a:"猪突猛進"},
{q:"問題孤□奮□",a:"孤軍奮闘"},
{q:"問題多□多□",a:"多情多恨"},
{q:"問題一□入□",a:"一球入魂"},
{q:"問題孤□無□",a:"孤立無援"},
{q:"問題伸□自□",a:"伸縮自在"},
{q:"問題面□躍□",a:"面目躍如"},
{q:"問題意□衝□",a:"意気衝天"},
{q:"問題粒□辛□",a:"粒粒辛苦"},
{q:"問題栄□盛□",a:"栄枯盛衰"},
{q:"問題酔□夢□",a:"酔生夢死"},
{q:"問題国□無□",a:"国士無双"},
{q:"問題粗□粗□",a:"粗衣粗食"},
{q:"問題換□奪□",a:"換骨奪胎"},
{q:"問題受□告□",a:"受胎告知"},
{q:"問題人□無□",a:"人畜無害"},
{q:"問題新□代□",a:"新陳代謝"}
],
reading:[
{q:"問題春は細かな 霧雨 が降る",a:"きりさめ"},
{q:"問題この 紋所 が目に入らぬか",a:"もんどころ"},
{q:"問題飛行機の 尾翼 のマークを見る",a:"びよく"},
{q:"問題話すことに 脈絡 がない",a:"みゃくらく"},
{q:"問題嘘が 露見 する",a:"ろけん"},
{q:"問題漢詩を 朗詠 する",a:"ろうえい"},
{q:"問題本を探して 書架 を確認する",a:"しょか"},
{q:"問題お腹いっぱい食べてご 満悦 だ",a:"まんえつ"},
{q:"問題赤い日を落ちるのを一つと 勘定 した",a:"かんじょう"},
{q:"問題人生の 岐路 に立つ",a:"きろ"},
{q:"問題ロケットの 軌道 を計算する",a:"きどう"},
{q:"問題結婚して 岳父 に会う",a:"がくふ"},
{q:"問題UFOが 虚空 に消える",a:"こくう"},
{q:"問題血液の 凝固 が始まる",a:"ぎょうこ"},
{q:"問題パンを 一斤 だから買う",a:"いっきん"},
{q:"問題スーパーで 鶏卵 を買う",a:"けいらん"},
{q:"問題馬の 手綱 を引く",a:"たづな"},
{q:"問題国が 国債 を発行する",a:"こくさい"},
{q:"問題鼻孔 をくすぐる匂いがする",a:"びこう"},
{q:"問題苦手な教科を 克服 する",a:"こくふく"},
{q:"問題提出された議題を 諮 る",a:"はか"},
{q:"問題新しい法律が 施行 される",a:"しこう"},
{q:"問題法律を 遵守 する",a:"じゅんしゅ"},
{q:"問題温暖 湿潤 な気候に住んでいる",a:"しつじゅん"},
{q:"問題一人暮らしで 自炊 する",a:"じすい"},
{q:"問題反発する力を 斥力 という",a:"せきりょく"},
{q:"問題着物で 粋 な着こなしをする",a:"いき"},
{q:"問題神に 犠牲 をささげる",a:"ぎせい"},
{q:"問題首里城の 礎石 を発掘する",a:"そせき"},
{q:"問題「っ」を 促音 という",a:"そくおん"},
{q:"問題他人のお菓子を 強奪 する",a:"ごうだつ"},
{q:"問題勉強を 怠 る",a:"おこた"},
{q:"問題稚児 のそら寝を学ぶ",a:"ちご"},
{q:"問題鍛鉄 でナイフを作る",a:"たんてつ"},
{q:"問題溶けた金属を 鋳型 に流し込む",a:"いがた"},
{q:"問題消防隊が 鎮火 する",a:"ちんか"},
{q:"問題死んだ人を 追慕 する",a:"ついぼ"},
{q:"問題田んぼの 畔 を作る",a:"あぜ"},
{q:"問題裁判の 陪審員 に選ばれる",a:"ばいしんいん"},
{q:"問題森林を 伐採 する",a:"ばっさい"}
],
kanji:[
{q:"問題授業中に いねむり する",a:"居眠り"},
{q:"問題庭の しげみ にマングースがいる",a:"茂み"},
{q:"問題金属を ようせつ する",a:"溶接"},
{q:"問題次の くうらん に適切な語句を入れなさい",a:"空欄"},
{q:"問題 りんじん を愛せ",a:"隣人"},
{q:"問題危険物取扱者試験の おつしゅ を受ける",a:"乙種"},
{q:"問題 りゅうれい な文字を書く",a:"流麗"},
{q:"問題商品を おろしね で売る",a:"卸値"},
{q:"問題夜道に きかい な影を見る",a:"奇怪"},
{q:"問題パソコンで えんかく 授業を受ける",a:"遠隔"},
{q:"問題異世界に しょうかん される",a:"召喚"},
{q:"問題星の破片は なめ らかだった",a:"滑"},
{q:"問題電話を取ったら とくしゅ 詐欺だった",a:"特殊"},
{q:"問題人気の きっさてん に入る",a:"喫茶店"},
{q:"問題手紙の最初に はいけい と書く",a:"拝啓"},
{q:"問題日本には ほげい 文化がある",a:"捕鯨"},
{q:"問題唇が こ を描く",a:"弧"},
{q:"問題寝坊して おおあわて する",a:"大慌て"},
{q:"問題海の真ん中にある ことう に渡る",a:"孤島"},
{q:"問題 こんでんえいねんしざいほう",a:"墾田永年私財法"},
{q:"問題危機感が けつじょ している",a:"欠如"},
{q:"問題歯車は じく を中心に回転する",a:"軸"},
{q:"問題三人寄れば もんじゅ の知恵",a:"文殊"},
{q:"問題イベントを しゅさい する",a:"主催"},
{q:"問題寮の部屋を せじょう した",a:"施錠"},
{q:"問題沖縄は こうしんりょう 栽培の北限だ",a:"香辛料"},
{q:"問題お じょう さん、お待ちなさい",a:"嬢"},
{q:"問題任務を すいこう する",a:"遂行"},
{q:"問題轟の たき を見に行く",a:"滝"},
{q:"問題構内に くわ の木が生えている",a:"桑"},
{q:"問題攻撃を そし する",a:"阻止"},
{q:"問題放課後に そうじ する",a:"掃除"},
{q:"問題道路に ちゅうしゃ する",a:"駐車"},
{q:"問題間違いを ていせい する",a:"訂正"},
{q:"問題北に ほくとしちせい が見える",a:"北斗七星"},
{q:"問題読谷は とうき が有名だ",a:"陶器"},
{q:"問題中東の ふんそうちたい へ行く",a:"紛争地帯"},
{q:"問題琉歌の かひ を建てる",a:"歌碑"},
{q:"問題 ねんど をこねて作品を作る",a:"粘土"},
{q:"問題教員が学校に ふにん する",a:"赴任"}
];

let currentQuestions=[],currentIndex=0,showOnlyBookmarked=false;
let bookmarks=JSON.parse(localStorage.getItem("kokugo_bookmarks")||"{}");

function initApp(){
  const mode=modeSelect.value;
  currentQuestions=showOnlyBookmarked?data[mode].filter(q=>bookmarks[mode+"_"+q.a]):[...data[mode]];
  currentIndex=0;
  updateCard();
}

function updateCard(){
  if(!currentQuestions.length){
    qText.innerText="問題なし";
    aText.innerText="-";
    counter.innerText="0 / 0";
    return;
  }
  card.classList.remove("is-flipped");
  const q=currentQuestions[currentIndex];
  const mode=modeSelect.value;
  qText.innerText=q.q;
  qHint.innerText=q.h||"";
  aText.innerText=q.a;
  counter.innerText=`${currentIndex+1} / ${currentQuestions.length}`;
  starBtn.classList.toggle("active",bookmarks[mode+"_"+q.a]);
}

function flipCard(){card.classList.toggle("is-flipped")}
function nextCard(e){e?.stopPropagation();currentIndex=(currentIndex+1)%currentQuestions.length;updateCard()}
function prevCard(e){e?.stopPropagation();currentIndex=(currentIndex-1+currentQuestions.length)%currentQuestions.length;updateCard()}

function toggleBookmark(e){
  e.stopPropagation();
  const mode=modeSelect.value;
  const q=currentQuestions[currentIndex];
  const k=mode+"_"+q.a;
  bookmarks[k]?delete bookmarks[k]:bookmarks[k]=1;
  localStorage.setItem("kokugo_bookmarks",JSON.stringify(bookmarks));
  updateCard();
}

function toggleOnlyBookmarked(){
  showOnlyBookmarked=!showOnlyBookmarked;
  filterBtnText.innerText=showOnlyBookmarked?"全て表示":"ブックマークのみを表示";
  initApp();
}

/* キーボード操作 */
document.addEventListener("keydown",e=>{
  if(["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName))return;
  if(e.key==="a"||e.key==="A"||e.key==="ArrowLeft")prevCard();
  if(e.key==="d"||e.key==="D"||e.key==="ArrowRight")next
