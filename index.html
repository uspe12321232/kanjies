<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>国語 小テスト完全版 - フラッシュカード</title>
<style>
:root{
  --primary:#4a90e2;
  --secondary:#f39c12;
  --bg:#f5f7fa;
  --text:#333;
}
body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}
header{
  width:100%;
  padding:15px;
  background:white;
  text-align:center;
  box-shadow:0 2px 5px rgba(0,0,0,.1);
}
.controls{
  margin:15px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}
select,button{
  padding:10px 15px;
  border-radius:8px;
  border:1px solid #ddd;
}
.counter{color:#777;margin-bottom:10px}

/* カード */
.card-container{
  width:90%;
  max-width:400px;
  height:250px;
  perspective:1000px;
  position:relative;
}
.card{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .6s;
  border-radius:15px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
}
.card.is-flipped{transform:rotateY(180deg)}
.card-face{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
  background:white;
  border-radius:15px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:20px;
  box-sizing:border-box;
  text-align:center;
}
.card-back{
  transform:rotateY(180deg);
  background:#eef5ff;
}
.question{font-size:1.2rem;font-weight:bold}
.answer{font-size:1.5rem;color:var(--primary);font-weight:bold}
.hint{font-size:.9rem;color:#666;margin-top:10px;text-align:center}

/* ブックマーク */
.btn-star{
  position:absolute;
  top:10px;
  right:15px;
  font-size:28px;
  background:none;
  border:none;
  color:#ccc;
  cursor:pointer;
  z-index:10;
}
.btn-star.active{color:var(--secondary)}

.nav-buttons{
  margin:20px;
  display:flex;
  gap:20px;
}
.btn-nav{
  width:60px;
  height:60px;
  border-radius:50%;
  border:none;
  background:var(--primary);
  color:white;
  font-size:20px;
}

/* スワイプ用 */
.touch-area{
  width:100%;
  height:100%;
  position:absolute;
  top:0;left:0;
}
</style>
</head>
<body>

<header><h3>国語 小テスト 完全版</h3></header>

<div class="controls">
<select id="modeSelect">
  <option value="yoji">四字熟語</option>
  <option value="reading">漢字の読み</option>
  <option value="kanji">漢字の書き</option>
</select>
<button id="filterBtn">ブックマークのみを表示</button>
</div>

<div class="counter" id="counter"></div>

<div class="card-container">
<button class="btn-star" id="starBtn">★</button>
<div class="card" id="card">
  <div class="card-face">
    <div class="question" id="qText"></div>
    <div class="hint" id="qHint"></div>
  </div>
  <div class="card-face card-back">
    <div class="answer" id="aText"></div>
  </div>
</div>
<div class="touch-area" id="touchArea"></div>
</div>

<div class="nav-buttons">
<button class="btn-nav" id="prevBtn">←</button>
<button class="btn-nav" id="nextBtn">→</button>
</div>

<script>
/* ===== 問題データ ===== */
const data={
yoji:[
{q:"一□□千",a:"一騎当千"},{q:"□怒哀□",a:"喜怒哀楽"},{q:"□□実実",a:"虚虚実実"},
{q:"平穏□□",a:"平穏無事"},{q:"□和□同",a:"付和雷同"},{q:"一□打□",a:"一網打尽"},
{q:"小心□□",a:"小心翼翼"},{q:"□□割拠",a:"群雄割拠"},{q:"愛□□苦",a:"愛別離苦"},
{q:"□幻自□",a:"変幻自在"},{q:"□己□礼",a:"克己復礼"},{q:"巧□令□",a:"巧言令色"},
{q:"□慈□悲",a:"大慈大悲"},{q:"不□長□",a:"不老長寿"},{q:"□婚□祭",a:"冠婚葬祭"},
{q:"試□錯□",a:"試行錯誤"},{q:"□殺□奪",a:"生殺与奪"},{q:"温□篤□",a:"温厚篤実"},
{q:"□□選択",a:"取捨選択"},{q:"大胆□□",a:"大胆不敵"},{q:"鯨□馬□",a:"鯨飲馬食"},
{q:"□口牛□",a:"鶏口牛後"},{q:"自□自□",a:"自暴自棄"},{q:"勇□果□",a:"勇猛果敢"},
{q:"佳□薄□",a:"佳人薄命"},{q:"複□怪□",a:"複雑怪奇"},{q:"感□無□",a:"感慨無量"},
{q:"首□一□",a:"首尾一貫"},{q:"離□集□",a:"離合集散"},{q:"沈□黙□",a:"沈思黙考"},
{q:"美□麗□",a:"美辞麗句"},{q:"遠□会□",a:"遠慮会釈"},{q:"猪□猛□",a:"猪突猛進"},
{q:"孤□奮□",a:"孤軍奮闘"},{q:"多□多□",a:"多情多恨"},{q:"一□入□",a:"一球入魂"},
{q:"孤□無□",a:"孤立無援"},{q:"伸□自□",a:"伸縮自在"},{q:"面□躍□",a:"面目躍如"},
{q:"意□衝□",a:"意気衝天"},{q:"粒□辛□",a:"粒粒辛苦"},{q:"栄□盛□",a:"栄枯盛衰"},
{q:"酔□夢□",a:"酔生夢死"},{q:"国□無□",a:"国士無双"},{q:"粗□粗□",a:"粗衣粗食"},
{q:"換□奪□",a:"換骨奪胎"},{q:"受□告□",a:"受胎告知"},{q:"人□無□",a:"人畜無害"},
{q:"新□代□",a:"新陳代謝"}
],
reading:[
{q:"春は細かな 霧雨 が降る",a:"きりさめ"},{q:"この 紋所 が目に入らぬか",a:"もんどころ"},
{q:"飛行機の 尾翼 のマークを見る",a:"びよく"},{q:"話すことに 脈絡 がない",a:"みゃくらく"},
{q:"嘘が 露見 する",a:"ろけん"},{q:"漢詩を 朗詠 する",a:"ろうえい"},
{q:"本を探して 書架 を確認する",a:"しょか"},{q:"お腹いっぱい食べてご 満悦 だ",a:"まんえつ"},
{q:"赤い日を落ちるのを一つと 勘定 した",a:"かんじょう"},{q:"人生の 岐路 に立つ",a:"きろ"},
{q:"ロケットの 軌道 を計算する",a:"きどう"},{q:"結婚して 岳父 に会う",a:"がくふ"},
{q:"UFOが 虚空 に消える",a:"こくう"},{q:"血液の 凝固 が始まる",a:"ぎょうこ"},
{q:"パンを 一斤 だから買う",a:"いっきん"},{q:"スーパーで 鶏卵 を買う",a:"けいらん"},
{q:"馬の 手綱 を引く",a:"たづな"},{q:"国が 国債 を発行する",a:"こくさい"},
{q:"鼻孔 をくすぐる匂いがする",a:"びこう"},{q:"苦手な教科を 克服 する",a:"こくふく"},
{q:"提出された議題を 諮 る",a:"はか"},{q:"新しい法律が 施行 される",a:"しこう"},
{q:"法律を 遵守 する",a:"じゅんしゅ"},{q:"温暖 湿潤 な気候に住んでいる",a:"しつじゅん"},
{q:"一人暮らしで 自炊 する",a:"じすい"},{q:"反発する力を 斥力 という",a:"せきりょく"},
{q:"着物で 粋 な着こなしをする",a:"いき"},{q:"神に 犠牲 をささげる",a:"ぎせい"},
{q:"首里城の 礎石 を発掘する",a:"そせき"},{q:"「っ」を 促音 という",a:"そくおん"},
{q:"他人のお菓子を 強奪 する",a:"ごうだつ"},{q:"勉強を 怠 る",a:"おこた"},
{q:"稚児 のそら寝を学ぶ",a:"ちご"},{q:"鍛鉄 でナイフを作る",a:"たんてつ"},
{q:"溶けた金属を 鋳型 に流し込む",a:"いがた"},{q:"消防隊が 鎮火 する",a:"ちんか"},
{q:"死んだ人を 追慕 する",a:"ついぼ"},{q:"田んぼの 畔 を作る",a:"あぜ"},
{q:"裁判の 陪審員 に選ばれる",a:"ばいしんいん"},{q:"森林を 伐採 する",a:"ばっさい"}
],
kanji:[
{q:"授業中に いねむり する",a:"居眠り"},{q:"庭の しげみ にマングースがいる",a:"茂み"},
{q:"金属を ようせつ する",a:"溶接"},{q:"次の くうらん に適切な語句を入れなさい",a:"空欄"},
{q:" りんじん を愛せ",a:"隣人"},{q:"危険物取扱者試験の おつしゅ を受ける",a:"乙種"},
{q:" りゅうれい な文字を書く",a:"流麗"},{q:"商品を おろしね で売る",a:"卸値"},
{q:"夜道に きかい な影を見る",a:"奇怪"},{q:"パソコンで えんかく 授業を受ける",a:"遠隔"},
{q:"異世界に しょうかん される",a:"召喚"},{q:"星の破片は なめ らかだった",a:"滑"},
{q:"電話を取ったら とくしゅ 詐欺だった",a:"特殊"},{q:"人気の きっさてん に入る",a:"喫茶店"},
{q:"手紙の最初に はいけい と書く",a:"拝啓"},{q:"日本には ほげい 文化がある",a:"捕鯨"},
{q:"唇が こ を描く",a:"弧"},{q:"寝坊して おおあわて する",a:"大慌て"},
{q:"海の真ん中にある ことう に渡る",a:"孤島"},{q:" こんでんえいねんしざいほう",a:"墾田永年私財法"},
{q:"危機感が けつじょ している",a:"欠如"},{q:"歯車は じく を中心に回転する",a:"軸"},
{q:"三人寄れば もんじゅ の知恵",a:"文殊"},{q:"イベントを しゅさい する",a:"主催"},
{q:"寮の部屋を せじょう した",a:"施錠"},{q:"沖縄は こうしんりょう 栽培の北限だ",a:"香辛料"},
{q:"お じょう さん、お待ちなさい",a:"嬢"},{q:"任務を すいこう する",a:"遂行"},
{q:"轟の たき を見に行く",a:"滝"},{q:"構内に くわ の木が生えている",a:"桑"},
{q:"攻撃を そし する",a:"阻止"},{q:"放課後に そうじ する",a:"掃除"},
{q:"道路に ちゅうしゃ する",a:"駐車"},{q:"間違いを ていせい する",a:"訂正"},
{q:"北に ほくとしちせい が見える",a:"北斗七星"},{q:"読谷は とうき が有名だ",a:"陶器"},
{q:"中東の ふんそうちたい へ行く",a:"紛争地帯"},{q:"琉歌の かひ を建てる",a:"歌碑"},
{q:"ねんど をこねて作品を作る",a:"粘土"},{q:"教員が学校に ふにん する",a:"赴任"}
]
};

/* ===== ロジック ===== */
let currentQuestions=[],currentIndex=0,showOnlyBookmarked=false;
let bookmarks=JSON.parse(localStorage.getItem("kokugo_bookmarks")||"{}");

const modeSelect=document.getElementById("modeSelect");
const qText=document.getElementById("qText");
const qHint=document.getElementById("qHint");
const aText=document.getElementById("aText");
const counter=document.getElementById("counter");
const card=document.getElementById("card");
const starBtn=document.getElementById("starBtn");
const filterBtn=document.getElementById("filterBtn");

function initApp(){
  const mode=modeSelect.value;
  currentQuestions=showOnlyBookmarked
    ? data[mode].filter(q=>bookmarks[mode+"_"+q.a])
    : [...data[mode]];
  currentIndex=0;
  updateCard();
}

function updateCard(){
  if(!currentQuestions.length){
    qText.innerText="問題なし";
    aText.innerText="-";
    qHint.innerText="";
    counter.innerText="0 / 0";
    return;
  }
  card.classList.remove("is-flipped");
  const q=currentQuestions[currentIndex];
  const mode=modeSelect.value;
  qText.innerText=q.q;
  qHint.innerText=q.h||"";
  aText.innerText=q.a;
  counter.innerText=`${currentIndex+1} / ${currentQuestions.length}`;
  starBtn.classList.toggle("active",bookmarks[mode+"_"+q.a]);
}

function flipCard(){card.classList.toggle("is-flipped")}
function nextCard(){currentIndex=(currentIndex+1)%currentQuestions.length;updateCard()}
function prevCard(){currentIndex=(currentIndex-1+currentQuestions.length)%currentQuestions.length;updateCard()}

starBtn.addEventListener("click",e=>{
  e.stopPropagation();
  const mode=modeSelect.value;
  const q=currentQuestions[currentIndex];
  const k=mode+"_"+q.a;
  bookmarks[k]?delete bookmarks[k]:bookmarks[k]=1;
  localStorage.setItem("kokugo_bookmarks",JSON.stringify(bookmarks));
  updateCard();
});

filterBtn.addEventListener("click",()=>{
  showOnlyBookmarked=!showOnlyBookmarked;
  filterBtn.innerText=showOnlyBookmarked?"全て表示":"ブックマークのみを表示";
  initApp();
});

modeSelect.addEventListener("change",initApp);
card.addEventListener("click",flipCard);

document.getElementById("nextBtn").addEventListener("click",nextCard);
document.getElementById("prevBtn").addEventListener("click",prevCard);

/* キーボード操作 */
document.addEventListener("keydown",e=>{
  if(["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName))return;
  if(e.key==="ArrowRight")nextCard();
  if(e.key==="ArrowLeft")prevCard();
  if(e.key===" ")flipCard();
});

/* スワイプ対応 */
let startX=0;
const touchArea=document.getElementById("touchArea");
touchArea.addEventListener("touchstart",e=>{startX=e.touches[0].clientX});
touchArea.addEventListener("touchend",e=>{
  const dx=e.changedTouches[0].clientX-startX;
  if(dx>50)prevCard();
  else if(dx<-50)nextCard();
});

/* 初期化 */
window.addEventListener("DOMContentLoaded",initApp);
</script>
</body>
</html>
